<div class="container mt-5">
  <div class="row">
    <div class="col-md-6 offset-3">
      <div class="card card-plain">
        <div class="card-header">
          <h4 class="card-title">Edit your profile</h4>
        </div>
        <div class="card-body">
          <form novalidate autocomplete="off" (ngSubmit)='saveProfile()' [formGroup]="userProfile">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="firstName">First Name</label>
                  <input type="text" class="form-control" id="firstName" formControlName='firstName'
                    [ngClass]="{'is-valid': (userProfile.get('firstName').touched || userProfile.get('firstName').dirty) && !userProfile.get('firstName').valid}"
                  >
                  <div class="invalid-feedback">
                    <span *ngIf="userProfile.get('firstName').errors?.required">First name is required</span>
                    <span *ngIf="userProfile.get('firstName').errors?.minlength">First name must be longer than 3 characters</span>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="lastName">Last Name</label>
                  <input type="text" class="form-control" id="lastName" formControlName='lastName'
                  [ngClass]="{'is-valid': (userProfile.get('lastName').touched || userProfile.get('lastName').dirty) && !userProfile.get('lastName').valid}"
                  >
                  <div class="invalid-feedback">
                    <span *ngIf="userProfile.get('lastName').errors?.required">Last name is required</span>
                    <span *ngIf="userProfile.get('lastName').errors?.minlength">Last name must be longer than 3 characters</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="userEmail">Email</label>
              <input type="email" class="form-control" id="userEmail" formControlName='email'
              [ngClass]="{ 'is-invalid' : (userProfile.get('email').touched || userProfile.get('email').dirty) && !userProfile.get('email').valid }"
              >
            </div>
            <div class="row" formGroupName='passwordGroup'>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="userPassword">Password</label>
                  <input type="password" class="form-control" id="userPassword" formControlName='password'
                    ngClass]="{ 'is-invalid' : (userProfile.get('passwordGroup.password').touched || userProfile.get('passwordGroup.password').dirty)
                                 && !userProfile.get('passwordGroup.password').valid
                             }"
                  >
                  <div class="invalid-feedback">
                    <span>Password is required.</span>
                    <span>Password must be longer than 6 characters.</span>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="userPasswordConfirm">Confirm Password</label>
                  <input type="password" class="form-control" id="userPasswordConfirm"
                  ngClass]="{ 'is-invalid' : (userProfile.get('passwordGroup.confirmPassword').touched || userProfile.get('passwordGroup.confirmPassword').dirty)
                               && !userProfile.get('passwordGroup.confirmPassword').valid
                           }"
                  >
                  <div class="invalid-feedback">
                    <span *ngIf="userProfile.get('passwordGroup.confirmPassword').errors?.required">Password does not match.</span>
                  </div>
                </div>
              </div>
            </div>

            <button class="btn btn-success" type="submit" [disabled]='!userProfile.valid'>Save</button>
            <button class="btn btn-info ml-3" (click)='cancelEditProfile()'>Cancel</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
